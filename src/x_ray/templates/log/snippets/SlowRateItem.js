var bar_labels=[],count=[],avg_slow_ms=[];data.forEach(t=>{bar_labels.push(t.time),count.push(t.count),avg_slow_ms.push(t.total_slow_ms/t.count)});const ctx=document.getElementById("canvas_{name}").getContext("2d");chart1=new Chart(ctx,{type:"bar",data:{labels:bar_labels,datasets:[{label:"Slow Count",data:count,type:"bar",backgroundColor:"rgba(54, 162, 235, 0.7)",yAxisID:"y"},{label:"Avg Slow (ms)",data:avg_slow_ms,type:"line",borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.2)",fill:!1,yAxisID:"y1",tension:.3,pointRadius:2}]},options:{responsive:!0,animation:{duration:ANIMATION_DURATION},plugins:{legend:{position:"top",labels:{usePointStyle:!0,generateLabels:genDefaultLegendLabels}},zoom:ZOOM_OPTIONS},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Count"}},y1:{beginAtZero:!0,position:"right",title:{display:!0,text:"Avg Slow (ms)"},grid:{drawOnChartArea:!1}}}}}),charts.push(chart1);var nsCount={};data.forEach(t=>{Object.entries(t.byNs).forEach(([t,a])=>{nsCount[t]=(nsCount[t]||0)+(a.count||0)})});var labels=Object.keys(nsCount),dataSlow=Object.values(nsCount),colors=labels.map((t,a)=>`hsl(${360*a/labels.length}, 70%, 60%)`);const ctx_byns=document.getElementById("canvas_{name}_byns").getContext("2d");var chart2=new Chart(ctx_byns,{type:"pie",data:{labels:labels,datasets:[{data:dataSlow,backgroundColor:colors}]},options:{plugins:{title:{display:!0,text:"Slow Count by Namespace"},legend:{position:"right",labels:{usePointStyle:!0,pointStyle:"rect"}}}}});charts.push(chart2);var nsSlowMs={};data.forEach(t=>{Object.entries(t.byNs).forEach(([t,a])=>{nsSlowMs[t]=(nsSlowMs[t]||0)+(a.total_slow_ms||0)})});dataSlow=Object.values(nsSlowMs);const ctx_byns_ms=document.getElementById("canvas_{name}_byns_ms").getContext("2d");var chart3=new Chart(ctx_byns_ms,{type:"pie",data:{labels:labels,datasets:[{data:dataSlow,backgroundColor:colors}]},options:{plugins:{title:{display:!0,text:"Slow MS by Namespace"},legend:{position:"right",labels:{usePointStyle:!0,pointStyle:"rect"}}}}});charts.push(chart3),resetButton.onclick=function(){chart1.resetZoom()};