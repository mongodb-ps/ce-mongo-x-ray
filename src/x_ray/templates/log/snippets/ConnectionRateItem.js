var labels=[],created=[],ended=[],total=[];data.forEach(e=>{labels.push(e.time),created.push(e.created),ended.push(-e.ended),total.push(e.total)});const ctx=document.getElementById("canvas_{name}").getContext("2d");var chart1=new Chart(ctx,{type:"bar",data:{labels:labels,datasets:[{label:"Connections Created",data:created,type:"bar",stack:"Stack 0",backgroundColor:"rgba(54, 162, 235, 0.7)"},{label:"Connections Ended",data:ended,type:"bar",stack:"Stack 0",backgroundColor:"rgba(255, 99, 132, 0.7)"},{label:"Total Connections",data:total,type:"line",borderColor:"rgba(255, 206, 86, 1)",backgroundColor:"rgba(255, 206, 86, 0.2)",fill:!1,yAxisID:"y1",tension:.3,pointRadius:2}]},options:{responsive:!0,animation:{duration:ANIMATION_DURATION},plugins:{title:{display:!0,text:"Connection Create/Ended Rate Over Time"},legend:{position:"top",labels:{usePointStyle:!0,generateLabels:genDefaultLegendLabels}},zoom:ZOOM_OPTIONS},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Connections per minute"}},y1:{beginAtZero:!0,position:"right",title:{display:!0,text:"Total Connections"},grid:{drawOnChartArea:!1}}}}});charts.push(chart1);labels=data.map(e=>e.time);var ipSet=new Set;data.forEach(e=>Object.keys(e.byIp).forEach(e=>ipSet.add(e)));const ips=Array.from(ipSet),datasets_byip=[];ips.forEach(e=>{datasets_byip.push({label:e+" created",data:data.map(t=>t.byIp[e]?.created||0),stack:"Stack 0"}),datasets_byip.push({label:e+" ended",data:data.map(t=>-(t.byIp[e]?.ended||0)),stack:"Stack 0"})});const ctx_byip=document.getElementById("canvas_{name}_byip").getContext("2d"),displayLegend=datasets_byip.length<=MAX_LEGENDS;var chart2=new Chart(ctx_byip,{type:"bar",data:{labels:labels,datasets:datasets_byip.map(e=>({label:e.label,data:e.data,type:"bar",stack:e.stack}))},options:{plugins:{title:{display:!0,text:"Connections Created/Ended by IP Over Time"},legend:{position:"top",display:displayLegend,labels:{usePointStyle:!0,generateLabels:genDefaultLegendLabels}},zoom:ZOOM_OPTIONS},responsive:!0,animation:{duration:ANIMATION_DURATION},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Connections"}}}}});charts.push(chart2),resetButton.onclick=function(){chart1.resetZoom(),chart2.resetZoom()};