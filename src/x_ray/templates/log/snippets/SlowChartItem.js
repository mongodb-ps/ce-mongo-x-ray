const groupedDataDuration={},groupedDataScanned={},groupedDataScannedObj={},positioner=document.getElementById("positioner_{name}"),code=positioner.nextElementSibling.getElementsByTagName("code")[0];hljs.highlightElement(code),data.forEach((t,e)=>{const n=t.attr.ns||"(unknown)";groupedDataDuration[n]||(groupedDataDuration[n]=[],groupedDataScanned[n]=[],groupedDataScannedObj[n]=[]);const a=new Date(t.t);groupedDataDuration[n].push({index:e,x:a.getTime(),y:t.attr.durationMillis,timeLabel:a.toLocaleTimeString()}),groupedDataScanned[n].push({index:e,x:a.getTime(),y:t.attr.keysExamined||0,timeLabel:a.toLocaleTimeString()}),groupedDataScannedObj[n].push({index:e,x:a.getTime(),y:t.attr.docsExamined||0,timeLabel:a.toLocaleTimeString()})});const dssDuration=Object.keys(groupedDataDuration).map(t=>{const e=generateRandomColor(.8),n=generateRandomColor(1);return{label:t,data:groupedDataDuration[t],backgroundColor:e,borderColor:n,borderWidth:1,pointRadius:4}}),dssScanned=Object.keys(groupedDataScanned).map(t=>{const e=generateRandomColor(.8),n=generateRandomColor(1);return{label:t,data:groupedDataScanned[t],backgroundColor:e,borderColor:n,borderWidth:1,pointRadius:4}}),dssScannedObj=Object.keys(groupedDataScannedObj).map(t=>{const e=generateRandomColor(.8),n=generateRandomColor(1);return{label:t,data:groupedDataScannedObj[t],backgroundColor:e,borderColor:n,borderWidth:1,pointRadius:4}});function onClick(t,e){if(e.length>0){const t=e[0].datasetIndex,n=e[0].index,a=this.data.datasets[t].data[n],o=data[a.index];highlighted===a.index?(code.textContent="// Click data points to review original log line...",highlighted=-1):(code.textContent=JSON.stringify(o,null,2),highlighted=a.index),delete code.dataset.highlighted,hljs.highlightElement(code),code.scrollIntoView({behavior:"smooth"})}}highlighted=-1;const configDuration={type:"scatter",data:{datasets:dssDuration},options:{responsive:!0,animation:{duration:ANIMATION_DURATION},plugins:{title:{display:!0,text:"Slow Operations - Duration vs Time by Namespace"},legend:{display:!0,position:"top",labels:{usePointStyle:!0,generateLabels:genDefaultLegendLabels}},tooltip:{callbacks:{title:function(t){const e=t[0].raw;return new Date(e.x).toISOString()},label:function(t){const e=t.raw;return[`Namespace: ${t.dataset.label}`,`Duration: ${e.y}ms`,`Time: ${new Date(e.x).toISOString()}`]}}},zoom:ZOOM_OPTIONS},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Time"},ticks:{callback:function(t){return new Date(t).toISOString().match(/(?<=T)[^\.Z]+/)[0]},maxTicksLimit:10}},y:{title:{display:!0,text:"Duration (milliseconds)"},beginAtZero:!0}},interaction:{mode:"point",intersect:!1},onClick:onClick}},configScanned={type:"scatter",data:{datasets:dssScanned},options:{responsive:!0,animation:{duration:ANIMATION_DURATION},plugins:{title:{display:!0,text:"Slow Operations - Scanned vs Time by Namespace"},legend:{display:!0,position:"top",labels:{usePointStyle:!0,generateLabels:genDefaultLegendLabels}},tooltip:{callbacks:{title:function(t){const e=t[0].raw;return new Date(e.x).toISOString()},label:function(t){const e=t.raw;return[`Namespace: ${t.dataset.label}`,`Scanned: ${e.y}`,`Time: ${new Date(e.x).toISOString()}`]}}},zoom:ZOOM_OPTIONS},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Time"},ticks:{callback:function(t){return new Date(t).toISOString().match(/(?<=T)[^\.Z]+/)[0]},maxTicksLimit:10}},y:{title:{display:!0,text:"Scanned Keys"},beginAtZero:!0}},interaction:{mode:"point",intersect:!1},onClick:onClick}},configScannedObj={type:"scatter",data:{datasets:dssScannedObj},options:{responsive:!0,animation:{duration:ANIMATION_DURATION},plugins:{title:{display:!0,text:"Slow Operations - Scanned Objects vs Time by Namespace"},legend:{display:!0,position:"top",labels:{usePointStyle:!0,generateLabels:genDefaultLegendLabels}},tooltip:{callbacks:{title:function(t){const e=t[0].raw;return new Date(e.x).toISOString()},label:function(t){const e=t.raw;return[`Namespace: ${t.dataset.label}`,`Scanned Obj: ${e.y}`,`Time: ${new Date(e.x).toISOString()}`]}}},zoom:ZOOM_OPTIONS},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Time"},ticks:{callback:function(t){return new Date(t).toISOString().match(/(?<=T)[^\.Z]+/)[0]},maxTicksLimit:10}},y:{title:{display:!0,text:"Scanned Objects"},beginAtZero:!0}},interaction:{mode:"point",intersect:!1},onClick:onClick}},ctx1=document.getElementById("canvas_{name}_duration").getContext("2d"),chart1=new Chart(ctx1,configDuration);charts.push(chart1);const ctx2=document.getElementById("canvas_{name}_scanned").getContext("2d"),chart2=new Chart(ctx2,configScanned);charts.push(chart2);const ctx3=document.getElementById("canvas_{name}_scannedObj").getContext("2d"),chart3=new Chart(ctx3,configScannedObj);charts.push(chart3);const linksContainer=document.getElementById("links_{name}"),links=linksContainer.getElementsByTagName("a");links[0].classList.add("in-view");for(let t=0;t<links.length;t++){links[t].addEventListener("click",function(t){t.preventDefault();for(let t=0;t<links.length;t++){const e=links[t],n=e.getAttribute("href").substring(1);document.getElementById(n).style.display="none",e.classList.remove("in-view")}const e=this.getAttribute("href").substring(1);document.getElementById(e).style.display="block",this.classList.add("in-view")})}resetButton.onclick=function(){chart1.resetZoom(),chart2.resetZoom(),chart3.resetZoom()};