data=data[0]||{};let valueHostMapping={},hostValueMapping={};const COLOR_MAPPING={STARTUP:"rgba(102, 29, 248, 0.85)",PRIMARY:"rgba(54, 197, 22, 0.85)",SECONDARY:"rgba(249, 224, 0, 0.85)",RECOVERING:"rgba(255, 159, 64, 0.85)",STARTUP2:"rgba(153, 102, 255, 0.85)",UNKNOWN:"rgba(0, 0, 0, 0.85)",ARBITER:"rgba(51, 182, 247, 0.85)",DOWN:"rgba(128, 0, 0, 0.85)",ROLLBACK:"rgba(255, 99, 132, 0.85)",REMOVED:"rgba(201, 203, 207, 0.85)"},datasets=Object.keys(data).map((t,e)=>{let a=e+1,i="UNKNOWN";const n=data[t].map(e=>{const n=new Date(e.timestamp);hostValueMapping[t]=a,valueHostMapping[a.toString()]=t;let o={x:n.getTime(),y:a,timestamp:n,event:e.event,details:e.details,id:e.id};return[20722,21215,21216,21358].includes(e.id)&&(i=e.details.new_state||"UNKNOWN"),o.state=i,o});return{label:t,data:n,showLine:!0,tension:0,borderWidth:10,pointBackgroundColor:FG_COLOR,pointBorderColor:FG_COLOR,pointBorderWidth:2,pointRadius:7,pointStyle:"line",pointRotation:90,pointHoverRadius:8,pointHoverBorderWidth:4,pointHoverBorderColor:"rgba(0, 255, 255, 0.85)",fill:!1,segment:{borderColor:t=>{const e=t.p0.raw.state;return COLOR_MAPPING[e]||"rgba(0, 0, 0, 1)"}}}}),canvas=document.getElementById("canvas_{name}");let height=30*Object.keys(data).length;height=height<90?90:height,canvas.style.height=`${height}px`,canvas.height=height;const ctx=canvas.getContext("2d"),chart=new Chart(ctx,{type:"line",data:{datasets:datasets},options:{animation:{duration:ANIMATION_DURATION},responsive:!0,maintainAspectRatio:!0,scales:{x:{type:"linear",title:{display:!0,text:"Time"},ticks:{callback:function(t){return new Date(t).toISOString().match(/(?<=T)[^\.Z]+/)[0]}}},y:{min:0,max:Object.keys(data).length+1,ticks:{stepSize:1,callback:function(t){return valueHostMapping[t.toString()]||""}},title:{display:!0,text:"Replica Set Members"}}},plugins:{legend:{display:!0,position:"top",labels:{generateLabels:function(t){return Object.keys(COLOR_MAPPING).map(t=>({text:t,fillStyle:COLOR_MAPPING[t],strokeStyle:COLOR_MAPPING[t],lineWidth:0,fontColor:FG_COLOR,hidden:!1}))},usePointStyle:!1,boxWidth:20,boxHeight:10,padding:15}},tooltip:{callbacks:{title:function(t){return`${t[0].dataset.label}`},label:function(t){const e=t.raw,a=e.timestamp.toISOString(),i=e.id;let n="";if(21392==i){n=`{version: ${e.details.config.version}, term: ${e.details.config.term}}`}else 21215==i||21216==i?n=`${e.details.new_state}`:21358==i?n=`${e.details.old_state} â†’ ${e.details.new_state}`:4615660==i&&(n="Priority Takeover");return[`Event: ${e.event}`,`Log ID: ${e.id}`,`Time: ${a}`,`Message: ${e.details.msg||""}`,`${n}`]}},backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,displayColors:!0},title:{display:!0,text:"State Transition Timeline",padding:20},zoom:ZOOM_OPTIONS},interaction:{mode:"nearest",intersect:!0}}});resetButton.onclick=function(){chart.resetZoom()};