const labels=Object.keys(data),currentData=labels.map(a=>data[a].current),availableData=labels.map(a=>data[a].available),activeData=labels.map(a=>data[a].active),threadedData=labels.map(a=>data[a].threaded),totalCreatedData=labels.map(a=>data[a].totalCreated);let wrapper=document.createElement("div"),canvas=document.createElement("canvas");wrapper.className="bar",canvas.className="bar",container.appendChild(wrapper),wrapper.appendChild(canvas);const ctx=canvas.getContext("2d"),chart=new Chart(ctx,{type:"bar",data:{labels:labels,datasets:[{label:"Current",data:currentData,backgroundColor:"rgba(54, 162, 235, 0.8)",stack:"stack1",yAxisID:"y",availableData:availableData},{label:"Active",data:activeData,backgroundColor:"rgba(255, 206, 86, 0.8)",stack:"stack2",yAxisID:"y"},{label:"Threaded",data:threadedData,backgroundColor:"rgba(153, 102, 255, 0.8)",stack:"stack3",yAxisID:"y"},{label:"Total Created",data:totalCreatedData,backgroundColor:"rgba(255, 99, 132, 0.8)",stack:"stack4",yAxisID:"y1"}]},options:{responsive:!0,scales:{x:{title:{display:!0,text:"Server"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Connection Count"},stacked:!0},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Total Created"},grid:{drawOnChartArea:!1}}},plugins:{title:{display:!0,text:"Connection Statistics by Server"},legend:{display:!0,position:"top"},tooltip:{mode:"point",intersect:!0,callbacks:{label:function(a){const t=a.dataset.label||"",e=a.parsed.y;if("Current"===t&&a.dataset.availableData){return[t+": "+e,"Available: "+a.dataset.availableData[a.dataIndex]]}return t+": "+e}}}}}});charts.push(chart);